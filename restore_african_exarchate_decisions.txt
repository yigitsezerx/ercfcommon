restore_african_exarchate_decision = {
	title = restore_african_exarchate.t
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_exarchate_africa.dds"
	}
	desc = restore_african_exarchate.desc
	decision_group_type = roman

	selection_tooltip = restore_african_exarchate.tip
	sort_order = 50

	is_shown = {
		# DLC check
		has_ep3_dlc_trigger = yes
		# Standard checks
		is_playable_character = yes
		OR = {
			has_title = title:e_byzantium
			has_title = title:h_roman_empire
		}		
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_restored_african_exarchate
			}
		}

		AND = {
			completely_controls = title:k_aegyptus
		}
	}

	is_valid = {
		completely_controls_region = custom_wre_africa
	}
	
	is_valid_showing_failures_only = {
		is_landed = yes
	}

	effect = {
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:flag_restored_african_exarchate
		}

		dynasty = { add_dynasty_prestige = 1000 }

		change_influence = {
			value = massive_influence_gain
			multiply = 3
		}

		every_vassal = {
			custom = custom.every_admin_vassal
			limit = { government_allows = administrative }
				add_opinion = {
					target = scope:root_scope
					modifier = admiration_opinion
					opinion = 10
				}
		}	

		create_title_and_vassal_change = {
			type = created
			save_scope_as = title_change
			add_claim_on_loss = yes
		}
		title:k_african_exarchate = {
			change_title_holder = {
				holder = root
				change = scope:title_change
			}
		}
		resolve_title_and_vassal_change = scope:title_change
		title:d_kairouan = { set_de_jure_liege_title = title:k_african_exarchate }
		title:d_tunis = { set_de_jure_liege_title = title:k_african_exarchate }
		title:d_kroumerie = { set_de_jure_liege_title = title:k_african_exarchate }
		title:d_gabes = { set_de_jure_liege_title = title:k_african_exarchate }
		title:d_tripolitania = { set_de_jure_liege_title = title:k_african_exarchate }
		title:d_syrte = { set_de_jure_liege_title = title:k_african_exarchate }
		title:d_bejaia = { set_de_jure_liege_title = title:k_african_exarchate }
		title:d_alger = { set_de_jure_liege_title = title:k_african_exarchate }
		title:d_rif = { set_de_jure_liege_title = title:k_african_exarchate }

		hidden_effect = {
			title:k_african_exarchate = { set_de_jure_liege_title = title:e_byzantium } # its only logical
			trigger_event = ercf_africa.1000
			destroy_title = title:k_africa
			title:d_ghat = { set_de_jure_liege_title = title:k_sahara }
			title:d_fezzan = { set_de_jure_liege_title = title:k_sahara }
		}
	}

	cost = {
		gold = {
			value = major_gold_value
			multiply = 1.5
			round = yes
		}
		prestige = {
			value = major_prestige_gain
			multiply = 2
			round = yes
		}
	}

	ai_check_interval = 1000

	ai_potential = {
		is_ruler = yes
		short_term_gold >= {
			value = major_gold_value
			multiply = 1.5
			round = yes
		}
		prestige >= {
			value = major_prestige_gain
			multiply = 3
			round = yes
		}
	}

	ai_will_do = {
		base = 0
	}
}
